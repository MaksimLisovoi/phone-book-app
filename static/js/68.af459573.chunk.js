"use strict";(self.webpackChunkphone_book_app=self.webpackChunkphone_book_app||[]).push([[68],{8655:function(n,e,r){r.d(e,{P:function(){return s}});var t,o=r(168),a=r(8789),i=r(9727),s=(0,a.ZP)(i.Z)(t||(t=(0,o.Z)(["\n  min-height: calc(100vh - 140px);\n  align-items: center;\n  justify-content: center;\n"])))},1068:function(n,e,r){r.r(e),r.d(e,{default:function(){return G}});var t,o,a,i,s=r(9439),c=r(9457),u=r(1413),l=r(5302),d=r(873),m=function(n){return n.filter},h=((0,d.P1)([function(n){return n.contacts.myContacts},m],(function(n,e){var r=e.toLowerCase();if(console.log("\u042f \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0441\u044f"),n.length>0)return n.filter((function(n){return n.name.toLowerCase().includes(r)}))})),r(5048)),f=r(4165),p=r(5861),x=r(168),b=r(8789),v=b.ZP.li(t||(t=(0,x.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  border: ",";\n  border-radius: ",";\n  padding: ",";\n\n  :not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return n.theme.borders.normal}),(function(n){return n.theme.radii.normal}),(function(n){return n.theme.space[4]}),(function(n){return n.theme.space[4]})),Z=(b.ZP.button(o||(o=(0,x.Z)(["\n  margin-left: ",";\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  border: ",";\n  border-radius: ",";\n  cursor: pointer;\n  transition: background-color 200ms ease-in-out;\n\n  &:disabled {\n    background-color: ",";\n  }\n\n  &:hover {\n    background-color: ",";\n  }\n"])),(function(n){return n.theme.space[4]}),(function(n){return n.theme.space[3]}),(function(n){return n.theme.colors.primary}),(function(n){return n.theme.colors.white}),(function(n){return n.theme.borders.none}),(function(n){return n.theme.radii.normal}),(function(n){return n.theme.colors.lightgray}),(function(n){return n.theme.colors.secondary})),b.ZP.p(a||(a=(0,x.Z)(["\n  margin-left: 5px;\n"]))),b.ZP.p(i||(i=(0,x.Z)([""]))),r(5103)),g=r(8402),j=r(184),C=function(){return(0,j.jsx)(c.x,{display:"inline-block",mr:2,children:(0,j.jsx)(g.s5,{strokeColor:"white",width:"14"})})},k=r(5218),y=r(890),w=function(n){var e=n.name,r=n.number,t=n.id,o=(0,l.Nt)(),a=(0,s.Z)(o,2),i=a[0],c=a[1].isLoading,u=function(){var n=(0,p.Z)((0,f.Z)().mark((function n(e){return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i(e);case 3:k.ZP.success("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0434\u0430\u043b\u0451\u043d"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),k.ZP.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430");case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}();return(0,j.jsxs)(v,{children:[(0,j.jsxs)(y.Z,{children:[e,": ",r]}),(0,j.jsx)(Z.Z,{onClick:function(){return u(t)},loading:c,variant:"outlined",size:"small",children:"Delete"})]})},P=r(5203),L=r(6895),M=function(n){var e=n.checkContacts,r=(0,h.v9)(m),t=(0,h.I0)();return(0,j.jsx)(c.x,{mb:"4",width:"50%",children:(0,j.jsx)(P.Z,{disabled:!e,fullWidth:!0,label:"Filter by name",type:"text",value:r,onChange:function(n){var e=n.target.value;t((0,L.T)(e))}})})},T=function(){var n=(0,l.bC)(),e=n.data,r=n.isLoading,t=n.error,o=(0,h.v9)(m),a=e&&e.length>0,i=function(){var n=o.toLowerCase();if(a)return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}(),s=r&&!t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(M,{checkContacts:a}),s?(0,j.jsx)("b",{children:"Request in progress..."}):(0,j.jsx)("ul",{children:i?i.map((function(n){return(0,j.jsx)(w,(0,u.Z)({},n),n.id)})):(0,j.jsx)(y.Z,{fontWeight:500,children:"There are no contacts in your Phonebook!"})})]})},q=r(4967),S=r(2791),A=r(8530),W=r(1459),z=r(627),F=r(2739),_=r(4708),I=r(9195),N="This field is required",D={required:N,validate:function(n){return!n.match(/[\u0430-\u044f\u0410-\u042f-0-9]/)||"Name may contain only latin letters"}},O={required:N,validate:function(n){return!n.match(/[\u0430-\u044f\u0410-\u042f-a-zA-Z]/)||"Phone may contain only numbers"}};function Q(n){var e=n.handleCloseModal,r=(0,l.bC)().data,t=(0,l.Tn)(),o=(0,s.Z)(t,2),a=o[0],i=o[1].isLoading,c=(0,I.cI)({defaultValues:{name:"",number:""}}),u=c.handleSubmit,d=c.control,m=(0,I.cl)({control:d}).errors,h=function(){var n=(0,p.Z)((0,f.Z)().mark((function n(t){return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.some((function(n){return n.name.toLowerCase()===t.name.toLowerCase()}))){n.next=2;break}return n.abrupt("return",alert("".concat(t.name," is already in contacts")));case 2:return n.prev=2,n.next=5,a(t);case 5:k.ZP.success("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),e(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),k.ZP.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430");case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(_.ZP,{}),(0,j.jsx)(A.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,j.jsxs)(A.Z,{component:"form",onSubmit:u(h),sx:{mt:1},children:[(0,j.jsx)(y.Z,{fontSize:24,align:"center",children:"Add contact"}),(0,j.jsx)(I.Qr,{rules:D,control:d,name:"name",render:function(n){var e,r,t=n.field;return(0,j.jsx)(P.Z,{margin:"normal",fullWidth:!0,required:!0,onChange:function(n){return t.onChange(n)},type:"name",name:"name",label:"Name",value:t.value,helperText:null===(e=m.name)||void 0===e?void 0:e.message,error:!(null===(r=m.name)||void 0===r||!r.message)})}}),(0,j.jsx)(I.Qr,{rules:O,control:d,name:"number",render:function(n){var e,r,t=n.field;return(0,j.jsx)(P.Z,{margin:"normal",required:!0,fullWidth:!0,onChange:function(n){return t.onChange(n)},type:"tel",name:"number",label:"Phone number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",value:t.value,helperText:null===(e=m.number)||void 0===e?void 0:e.message,error:!(null===(r=m.number)||void 0===r||!r.message)})}}),(0,j.jsxs)(q.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:[i&&(0,j.jsx)(C,{}),"Add contact"]})]})})]})}var R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},V=function(n){var e=n.isModalOpen,r=n.handleCloseModal;return(0,j.jsx)(W.Z,{open:e,onClose:r,closeAfterTransition:!0,slots:{backdrop:F.Z},slotProps:{backdrop:{timeout:500}},children:(0,j.jsx)(z.Z,{in:e,children:(0,j.jsx)(A.Z,{sx:R,children:(0,j.jsx)(Q,{handleCloseModal:r})})})})},B=r(2588),E=r(8655);function G(){var n=(0,S.useState)(!1),e=(0,s.Z)(n,2),r=e[0],t=e[1];return(0,j.jsxs)(E.P,{component:"main",children:[r&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(V,{isModalOpen:r,handleCloseModal:function(){t(!1)}})}),(0,j.jsxs)(c.x,{p:5,children:[(0,j.jsx)(B.Z,{}),(0,j.jsx)(y.Z,{variant:"h5",fontSize:28,mb:2,children:"My contacts"}),(0,j.jsx)(q.Z,{onClick:function(){t(!0)},variant:"contained",sx:{mb:2},children:"Add Contact"}),(0,j.jsx)(T,{})]})]})}}}]);
//# sourceMappingURL=68.af459573.chunk.js.map